import{H as e}from"../highlight.js/highlight.js.ff00c245.js";import{m as t}from"../marked/marked.19a35d50.js";import{a as i}from"../vue-router/vue-router.9473b667.js";import{v as r}from"../vue3-preview-image/vue3-preview-image.dce68680.js";import{A as s,a,g as o}from"../index/index.c88b4596.js";import{g as l,j as n}from"../element-plus/element-plus.86321995.js";import{d as p,o as m,c as u,X as c,R as g,a as d,F as j,a6 as v,M as h,W as f,r as y,Q as x,n as k}from"../@vue/@vue.fe24ed5a.js";import{_ as b}from"../_plugin-vue_export-helper/_plugin-vue_export-helper.1b428a4d.js";import"../vue/vue.6569c03c.js";import"../@babel/@babel.9867481d.js";import"../axios/axios.a44b2fc3.js";import"../index/index.ae57d152.js";import"../../assets/index-61b17357.js";import"../@kangc/@kangc.442f513e.js";import"../@vuepress/@vuepress.68ab59a1.js";import"../@highlightjs/@highlightjs.fccd0474.js";import"../pinia/pinia.9e201ab2.js";import"../pinia-plugin-persist/pinia-plugin-persist.70d140bd.js";import"../@co/@co.fb4682a1.js";import"../mitt/mitt.f0e54764.js";import"../nprogress/nprogress.43b09d2e.js";import"../js-cookie/js-cookie.d59fc71c.js";import"../lodash-es/lodash-es.9f1a9679.js";import"../@vueuse/@vueuse.9c77a690.js";import"../@element-plus/@element-plus.cddc8f8f.js";import"../@popperjs/@popperjs.0e77d79c.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.4d8034fa.js";import"../async-validator/async-validator.163d02db.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.500438c6.js";import"../@floating-ui/@floating-ui.945a406c.js";const _={class:"navigation"},A={id:"co-per",class:"navigation-content"},w=["onClick"],L=b(p({__name:"title-toc",props:{titleList:{type:Array,default:()=>[]}},emits:["title-click"],setup(e,{emit:t}){const i=e;return(e,r)=>{const s=l;return m(),u("div",_,[c(s,null,{default:g((()=>[d("div",A,[(m(!0),u(j,null,v(i.titleList,((e,i)=>(m(),u("div",{key:i+"art",style:h({padding:`10px 0 10px ${10*e.indent}px`})},[d("a",{style:{cursor:"pointer",color:"black","margin-left":"20px"},onClick:i=>(e=>{t("title-click",e)})(e)},f(e.title),9,w)],4)))),128))])])),_:1})])}}}),[["__scopeId","data-v-d4595b58"]]),I={class:"passage"},T=["innerHTML"],B=p({__name:"index",setup(l){const p=y(),u=i();t.setOptions({renderer:new t.Renderer,highlight(t,i){const r=e.getLanguage(i)?i:"plaintext";return e.highlight(t,{language:r}).value},langPrefix:"hljs language-",pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});const j=y(),v=y([]),h=e=>{const t=document.getElementById(e.id);t&&t.scrollIntoView()},f=e=>{const{target:t}=e;if("IMG"===t.tagName){if(!t.getAttribute("src"))return;const e=Array.from(p.value.querySelectorAll("img")),i=e.map((e=>e.getAttribute("src"))).filter((e=>e)),s=e.indexOf(t);r.preview(i[s])}};return(async()=>{const{id:e}=u.params;if(!e)return;const i=await a(e);o(i.url).then((e=>{j.value=t(e.data),k((()=>{const e=p.value.querySelectorAll("h1,h2,h3"),t=Array.from(e).filter((e=>!!e.innerText.trim())),i=Array.from(new Set(t.map((e=>e.tagName)))).sort();v.value=t.map((e=>({title:e.innerText,lineIndex:e.getAttribute("data-v-md-line"),id:e.getAttribute("id"),indent:i.indexOf(e.tagName)})))})),k((()=>{var e,t;const i=(null==(e=document.getElementById("co-per"))?void 0:e.getElementsByTagName("a"))||[],r=(null==(t=document.getElementById("co-per"))?void 0:t.getElementsByTagName("div"))||[];for(let s=0;s<i.length;s++)0===s?(i[s].style.color="var(--primary-color)",i[s].style.marginLeft="20px",r[s].style.borderLeft="1px solid var(--primary-color)"):(i[s].style.color="black",r[s].style.borderLeft="1px solid #eee")}))})).catch((e=>{n.error("失败")}))})(),(e,t)=>(m(),x(s,null,{Main:g((()=>[d("div",I,[c(L,{"title-list":v.value,onTitleClick:h},null,8,["title-list"]),d("div",{ref_key:"previewRef",ref:p,onClick:f,innerHTML:j.value},null,8,T)])])),_:1}))}});export{B as default};
